<body>
    <table border="1">
        <tr>
            <td>Name:-</td>
            <td><input type="text" id="name"></td>
        </tr>
        <tr>
            <td>Email:-</td>
            <td><input type="email" id="email"></td>
        </tr>
        <tr>
            <td>Password:-</td>
            <td><input type="text" id="password"></td>
        </tr>
        <tr>
            <td colspan="2"><input type="button" value="Submit" id="name" onclick="viewData()"></td>
        </tr>
    </table>
    <br/>
    <br/>
    <table border="1">
        <tr>
            <td>Id</td>
            <td>Name</td>
            <td>Email</td>
            <td>Password</td>
            <td>Action</td>
        </tr>
        <tbody id="record">

        </tbody>
    </table>
</body>

<script>
    let data = [];
    printData();

    function viewData() {
        let name = document.getElementById("name").value;
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;

        let obj = {
            userId : Math.floor(Math.random() * 1000),
            userName: name,
            userEmail: email,
            userPassword: password
        }
        if(localStorage.getItem("crudTask") === null || localStorage.getItem("crudTask") === undefined)
        {
            data.push(obj);
            localStorage.setItem("crudTask" , JSON.stringify(data));
        }
        else{
            let val = JSON.parse(localStorage.getItem("crudTask"));

            val.push(obj);
            localStorage.setItem("crudTask" , JSON.stringify(val));
        }
        

        alert("record added successfully");

        document.getElementById("name").value = "";
        document.getElementById("email").value = "";
        document.getElementById("password").value = "";

        printData();
    }

    function printData(){
        let val = JSON.parse(localStorage.getItem("crudTask"));

        let tbl = "";

        for(let i in val){
            tbl += 
            `
                <tr>
                    <td>${val[i].userId}</td>
                    <td>${val[i].userEmail}</td>  
                    <td>${val[i].userPassword}</td>    
                    <td>${val[i].userPassword}</td> 
                    <td><button onclick="deleteData(${val[i].userId})">Delete</button></td>   
                </tr>
            `
        }
        document.getElementById("record").innerHTML = tbl;
    }

    function deleteData(id){
        // console.log(id)

        let val = JSON.parse(localStorage.getItem("crudTask"));

        // console.log(val);

        for(let i in val){
            if(val[i].userId == id){
                // console.log(val[i]);

                val.splice(i, 1);
            }
            localStorage.setItem("crudTask", JSON.stringify(val));
        }

        alert("deleted successfully");
        printData();
    }
</script>